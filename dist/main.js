!function(t){var e={};function n(o){if(e[o])return e[o].exports;var s=e[o]={i:o,l:!1,exports:{}};return t[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(o,s,function(e){return t[e]}.bind(null,s));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);const o=document.getElementById("list");class s{constructor(t,e,n){this.amount=t,this.comment=e,this.change=n}render(){const t=document.createElement("li"),e=document.createElement("div");e.classList.add("spendings-list__ind"),!0===this.change&&e.classList.add("increase"),e.innerHTML='<svg class="spendings-list__ind" height="30" width="30"><circle cx="15" cy="15" r="8" fill="#f5625d"/></svg>';const n=document.createElement("div");n.classList.add("spendings-list__comment"),n.textContent=this.comment;const s=document.createElement("div");s.classList.add("spendings-list__summa"),s.textContent=Number(this.amount).toFixed(2);const a=new Date;s.dataset.time=`${a.getDate()}.${a.getMonth()+1}<br>${a.getHours()}:${a.getMinutes()}`,t.append(e,n,s),o.appendChild(t)}}class a{constructor(t,e){this.amount=t,this.comment=e}render(){const t=document.createElement("div"),e=document.createElement("div");e.classList.add("aim-container__curr-cont");const n=document.createElement("h2");n.textContent=Number(this.amount).toFixed(2);const o=document.createElement("div");o.classList.add("aim-container__cur-controls");const s=document.createElement("div");s.classList.add("aim-container__controls_cur"),s.textContent="BYN";const a=document.createElement("div");a.classList.add("aim-container__aim-descr"),a.textContent=this.comment,o.append(s),e.append(n,o),t.append(e,a),document.getElementById("aim").append(t)}}function r(t,e){const n=Number(JSON.parse(localStorage.getItem("aim")));let o=Number(JSON.parse(localStorage.getItem("sum")));e?o+=Number(t):o-=Number(t),document.getElementById("r-perc").textContent=(o/n*100).toFixed(2),document.getElementById("r-cur").textContent=(n-o).toFixed(2),localStorage.removeItem("sum"),localStorage.setItem("sum",String(o))}const c=document.getElementById("list");!async function(){const t=await JSON.parse(localStorage.getItem("aimObj")),e=await JSON.parse(localStorage.getItem("spendings"));var n,o;t&&(n=t.amount,o=t.comment,new a(n,o).render(),document.getElementById("stifle").outerHTML="",document.getElementById("aim").dataset.state="not empty",r(0,!0),Array.isArray(e)&&(document.getElementById("n-stifle").outerHTML="",e.forEach(t=>{!function(t,e,n){new s(t,e,n).render(),null!==document.getElementById("n-stifle")&&(document.getElementById("n-stifle").outerHTML="")}(t.amount,t.comment,t.change)})))}(),c.addEventListener("click",t=>{t.target.classList.contains("spendings-list__summa")&&(t.target.classList.contains("time")?(t.target.dataset.date=t.target.innerHTML,t.target.innerHTML=t.target.dataset.amount):(t.target.dataset.amount=t.target.innerHTML,t.target.innerHTML=t.target.dataset.time),t.target.classList.toggle("time"))}),document.getElementById("add_button").addEventListener("click",()=>{"empty"===document.getElementById("aim").dataset.state?document.getElementById("form-aim").classList.toggle("hidden"):document.getElementById("form").classList.toggle("hidden")}),document.querySelectorAll(".close_button").forEach(t=>{t.addEventListener("click",t=>{t.target.closest(".form-bg").classList.toggle("hidden")})}),document.getElementById("form").addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("input-Am").value,n=document.getElementById("input-Com").value,o=document.getElementById("input-Change").checked;!function(t,e,n){const o=new s(t,e,n),a=JSON.parse(localStorage.getItem("spendings"));a.push(o),localStorage.setItem("spendings",JSON.stringify(a)),o.render(),null!==document.getElementById("n-stifle")&&(document.getElementById("n-stifle").outerHTML="")}(e,n,o),r(e,o),t.target.closest(".form-bg").classList.toggle("hidden"),t.target.closest("form").reset()}),document.getElementById("form-aim").addEventListener("submit",t=>{t.preventDefault();const e=document.getElementById("a-input-Am").value;!function(t,e){const n=new a(t,e);localStorage.setItem("aimObj",JSON.stringify(n)),n.render(),document.getElementById("stifle").outerHTML="",document.getElementById("aim").dataset.state="not empty"}(e,document.getElementById("a-input-Com").value),document.getElementById("aim").dataset.state="not empty",t.target.closest(".form-bg").classList.toggle("hidden"),t.target.closest("form").reset(),localStorage.setItem("aim",e),localStorage.setItem("sum",0),localStorage.setItem("spendings",JSON.stringify([]))})}]);